,V
    console.dir(res.locals.page);,V
        attachments: [],V
var ,v
        var finished = false;,V
attachments,v
function,v
                console.log("DONE");,V
res.send(200);,v
        });,V
            res.send(200);,V
        console.dir(target);,V
        console.dir(file.path);,V
        console.dir(exists);,V
exists,v
                console,V
    console.dir(target);,V
    console.dir(page._id);,V
target,v
    console.dir(page);,V
file.path,v
          if(err) return res.send(400);,V
        if(err){            console.error(err);            return res.send(400);        },V
            ,V
makeDir,v
functionmakeDir,V
req.files.attachments,v
r,v
n,v
req.files.attachments.,v
            if(errors.length == 0) errors = null;,V
[];,v
),v
    func,V
},v
{,v
    cb();,V
 ,v
           ,V
        moveFiles(files, target);,V
"../public/attachments/" + page._id,,v
var dir;,V
        res.send(200);,V
result,v
(,v
if,v
    "",,V
    if(supportedTypes.indexOf(req.files.attachments,V
    res.send(200);,V
    console.dir(req.files);,V
    console.dir(req.headers);,V
referer,v
.,v
  console.dir(req.referer);  console.dir(req.files);,V
files,v
    return res.send(200);,V
url,v
        ,V
        $(evt.target).addClass("active");,V
handleDragOver,v
enter,v
        dropZone.addEventListener('dragenter', handleDragOver, false);,V
over,v
        dropZone.addEventListener('dragover', handleDragOver, false);,V
        var files = evt.dataTransfer.files; // FileList object.,V
        // files is a FileList of File objects. List some properties.        var output = [];        for (var i = 0, f; f = files[i]; i++) {            output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',                        f.size, ' bytes, last modified: ',                        f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',                        '</li>');        },V
        document.getElementById('attachments').innerHTML = '<ul>' + output.join('') + '</ul>';,V
            console.dir("done");,V
file,v
f,v
            uploadFiles(document.location.href, f);,V
a,v
loaction,v
...,v
list,v
-here,v
copy,v
    // Setup the dnd listeners.    var dropZone = document.getElementById('drop-here');    dropZone.addEventListener('dragover', handleDragOver, false);    dropZone.addEventListener('drop', handleFileSelect, false);,V
_zone,v
            return;,V
box ,v
10px;,v
},V
    color: red !important;,V
.box {,V
    margin-bottom: 2em;,V
    margin-top: 2em;,V
    color: green;,V
.box {    color: green;    margin-top: 2em;    margin-bottom: 2em;},V
box,v
solid,v
fileDropper,v
H,v
eee,v
mi,v
    console.dir(pathRegex);,V
      ,V
    script(src="/javascripts/application.js"),V
 script(type='text/javascript')ggC,v
      Aloha.ready( function() {        var $ = Aloha.jQuery;        $('.editable').aloha();        var save = function(){            $.post(document.location.href, {              content: $('.content.editable').html(),              title: $('h1.title').html(),              tags: $(".tags div").html()            }).success(saved);        };        Aloha.bind('aloha-editable-deactivated', save);        $('.edit').blur(save);      });      var saved = function(){          var el = $("<div class='alert alert-success'>Saved</div>").appendTo('body .container');          setTimeout(function(){ el.remove();}, 2e3);      };,V
